<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 Upcoming Networking Events</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 50px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: float 20s linear infinite;
        }
        
        @keyframes float {
            0% { transform: translate(-50px, -50px) rotate(0deg); }
            100% { transform: translate(-50px, -50px) rotate(360deg); }
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            font-weight: 800;
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .last-updated {
            opacity: 0.9;
            font-size: 1rem;
            position: relative;
            z-index: 2;
            background: rgba(255,255,255,0.1);
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
        }
        
        .filters-container {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px 40px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .filters-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }
        
        .filter-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .filter-btn {
            padding: 12px 24px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1rem;
        }
        
        .filter-btn:hover, .filter-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .clear-filters {
            background: #e74c3c !important;
            border-color: #e74c3c !important;
            color: white !important;
        }
        
        .clear-filters:hover {
            background: #c0392b !important;
            border-color: #c0392b !important;
        }
        
        .search-container {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .search-box {
            width: 100%;
            max-width: 500px;
            padding: 15px 25px;
            font-size: 1.1rem;
            border: 2px solid #dee2e6;
            border-radius: 50px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }
        
        .content {
            padding: 40px;
        }
        
        .stats-container {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: white;
            padding: 20px 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            min-width: 140px;
            transition: transform 0.3s ease;
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.95rem;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            font-weight: 500;
        }
        
        /* Organization Containers */
        .organization-container {
            margin-bottom: 40px;
            animation: slideIn 0.6s ease-out;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .organization-header {
            padding: 25px 35px;
            color: white;
            font-size: 1.4rem;
            font-weight: 700;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .organization-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shine 4s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* Engineering NZ Branding */
        .engineering-nz .organization-header {
            background: linear-gradient(135deg, #1e4d6b 0%, #2980b9 100%);
        }
        
        .engineering-nz {
            border: 3px solid #2980b9;
        }
        
        /* Building Institute Branding */
        .building-institute .organization-header {
            background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
        }
        
        .building-institute {
            border: 3px solid #e74c3c;
        }
        
        /* TIC Branding */
        .tic-events .organization-header {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
        }
        
        .tic-events {
            border: 3px solid #9b59b6;
        }
        
        /* University Branding */
        .university-events .organization-header {
            background: linear-gradient(135deg, #d35400 0%, #e67e22 100%);
        }
        
        .university-events {
            border: 3px solid #e67e22;
        }
        
        .org-events-grid {
            padding: 25px;
            background: #f8f9fa;
            display: grid;
            gap: 20px;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        }
        
        .event-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border-top: 4px solid #3498db;
        }
        
        .event-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        .engineering-nz .event-card {
            border-top-color: #2980b9;
        }
        
        .building-institute .event-card {
            border-top-color: #e74c3c;
        }
        
        .tic-events .event-card {
            border-top-color: #9b59b6;
        }
        
        .university-events .event-card {
            border-top-color: #e67e22;
        }
        
        .event-content {
            padding: 25px;
        }
        
        .event-content h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #2c3e50;
            line-height: 1.4;
        }
        
        .event-details p {
            margin-bottom: 12px;
            color: #34495e;
            line-height: 1.6;
        }
        
        .event-details strong {
            color: #2c3e50;
        }
        
        .event-link {
            display: inline-block;
            margin-top: 15px;
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .event-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .no-events {
            text-align: center;
            padding: 80px 20px;
            color: #6c757d;
            font-size: 1.3rem;
        }
        
        .no-events-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 40px 20px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .filters-container {
                padding: 25px 20px;
            }
            
            .content {
                padding: 25px 20px;
            }
            
            .org-events-grid {
                padding: 20px;
                grid-template-columns: 1fr;
            }
            
            .event-content {
                padding: 20px;
            }
            
            .event-content h3 {
                font-size: 1.2rem;
            }
            
            .organization-header {
                padding: 20px 25px;
                font-size: 1.2rem;
            }
            
            .stats-container {
                gap: 15px;
            }
            
            .stat-item {
                padding: 15px 20px;
                min-width: 120px;
            }
            
            .stat-number {
                font-size: 2rem;
            }
            
            .filter-buttons {
                gap: 10px;
            }
            
            .filter-btn {
                padding: 10px 18px;
                font-size: 0.95rem;
            }
        }
        
        @media (max-width: 480px) {
            .filter-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .filter-btn {
                width: 200px;
            }
            
            .stats-container {
                flex-direction: column;
                align-items: center;
            }
            
            .stat-item {
                width: 200px;
            }
            
            .org-events-grid {
                padding: 15px;
                grid-template-columns: 1fr;
            }
            
            .event-content {
                padding: 15px;
            }
        }
.back-button-container {
    position: fixed;
    top: 40px;
    left: 20px;
    z-index: 1000;
}

.back-button {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    color: #2c3e50;
    border: none;
    padding: 12px 18px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 8px;
}

.back-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    background: rgba(255, 255, 255, 1);
}

.back-button:active {
    transform: translateY(0);
}

@media (max-width: 768px) {
    .back-button-container {
        position: relative;
        top: 0;
        left: 0;
        margin: 15px 0;
        text-align: left;
        padding: 0 20px;
    }
    
    .back-button {
        position: relative;
        display: inline-flex;
    }
}
    
    </style>
</head>
<body>
<div class="back-button-container">
    <a href="index.html" class="back-button">
        <span>←</span>
        Back to Home
    </a>
    <div class="container">
        <div class="header">
            <h1>🎯 Upcoming Networking Events 🎯</h1>
            <div class="last-updated">Last updated: 2025-09-02T23:03:30.8483946Z</div>
        </div>
        
        <div class="filters-container">
            <div class="filters-title">🔍 Filter Events</div>
            <div class="search-container">
                <input type="text" class="search-box" id="searchBox" placeholder="🔍 Search events by title, location, or description...">
            </div>
            <div class="filter-buttons">
                <button class="filter-btn active" data-period="all">📅 All Events</button>
                <button class="filter-btn" data-period="thisweek">⚡ This Week</button>
                <button class="filter-btn" data-period="nextweek">📈 Next Week</button>
                <button class="filter-btn" data-period="fourweeks">📆 Coming Month</button>
                <button class="filter-btn clear-filters">🗑️ Clear Search</button>
            </div>
        </div>
        
        <div class="content">
            <div class="stats-container" id="statsContainer">
                <div class="stat-item">
                    <span class="stat-number" id="totalEvents">0</span>
                    <span class="stat-label">Total Events</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="thisWeekCount">0</span>
                    <span class="stat-label">This Week</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="nextWeekCount">0</span>
                    <span class="stat-label">Next Week</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="upcomingCount">0</span>
                    <span class="stat-label">Coming Month</span>
                </div>
            </div>
            
            <div id="allEventsContainer">
                <!-- Engineering NZ Events -->
                <div class="organization-container engineering-nz" id="engineeringNzContainer">
                    <div class="organization-header">
                        <h2>⚙️ Engineering New Zealand</h2>
                    </div>
                    <div class="org-events-grid">
                        <div class="event-card thisweek" data-date="2025-09-04">
                            <div class="event-content">
                                <h3>He kura nā Rātā, He kura pūkaha</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 4, 2025</p>
                                    <p><strong>📍 Location:</strong> 3 Grafton Road, Auckland Central</p>
                                    <p><strong>📄 Summary:</strong> Come along to explore the past, present and future of Māori in engineering. Hear from leaders in the field and collaborate on ways to apply mātauranga and Te Ao Māori in engineering to help make the profession more inclusive for Māori.</p>
                                    <a href="https://www.engineeringnz.org/programmes/kimihia-rangahaua/he-kura-n%C4%81-r%C4%81t%C4%81-he-kura-p%C5%ABkaha-wisdom-from-r%C4%81t%C4%81/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="event-card thisweek" data-date="2025-09-04">
                            <div class="event-content">
                                <h3>Young Engineers & Espressos</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 4, 2025</p>
                                    <p><strong>📍 Location:</strong> 7/11 Waterloo Quay, Wellington</p>
                                    <p><strong>📄 Summary:</strong> Join us for a relaxed coffee catch-up with fellow young engineers! It's a great chance to step away from the screen, exchange ideas and get to know each other in a laid-back setting. A free coffee and a bite to eat will be provided as an added bonus.</p>
                                    <a href="https://www.engineeringnz.org/courses-events/event/young-engineers-espressos/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="event-card thisweek" data-date="2025-09-04">
                            <div class="event-content">
                                <h3>Pub Quiz in Howick</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 4, 2025</p>
                                    <p><strong>📍 Location:</strong> 78 Picton Street, Auckland</p>
                                    <p><strong>📄 Summary:</strong> Join the Auckland Branch for a pub quiz and connect with fellow engineers over a friendly battle of wits.</p>
                                    <a href="https://www.engineeringnz.org/courses-events/event/pub-quiz-in-howick/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="event-card thisweek" data-date="2025-09-04">
                            <div class="event-content">
                                <h3>Renold New Zealand Site Visit</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 4, 2025</p>
                                    <p><strong>📍 Location:</strong> 594 Rosebank Road, Auckland</p>
                                    <p><strong>📄 Summary:</strong> Join the Auckland Branch for an exclusive behind-the-scenes tour of Renold New Zealand, hosted by General Manager, Vaibhav Garg. This is a unique opportunity to explore Renold's world-class workshop facilities and gain insights into their machining capabilities and diverse product range.</p>
                                    <a href="https://www.engineeringnz.org/courses-events/event/renold-new-zealand-site-visit/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="event-card fourweeks" data-date="2025-09-23">
                            <div class="event-content">
                                <h3>Humes Papakura Manufacturing Plant Tour</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 23, 2025</p>
                                    <p><strong>📍 Location:</strong> 76 Hunua Road, Papakura</p>
                                    <p><strong>📄 Summary:</strong> This tour offers engineers the opportunity to observe the latest concrete pipe manufacturing technologies in New Zealand, including Radial Press (RP) and Vibration Technology (VT). Attendees will gain insight into vertically cast pipe production process and see first hand how precision, consistency, and quality are achieved at scale.</p>
                                    <a href="https://www.engineeringnz.org/courses-events/event-template/?eventtemplate=4574-humes-papakura-manufacturing-plant-tour&region=IPENZB" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Building Institute Events -->
                <div class="organization-container building-institute" id="buildingInstituteContainer">
                    <div class="organization-header">
                        <h2>🏗️ Building Institute</h2>
                    </div>
                    <div class="org-events-grid">
                        <div class="event-card thisweek" data-date="2025-09-03">
                            <div class="event-content">
                                <h3>Southern Region Rockcote Quiz Night 2025</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 3, 2025</p>
                                    <p><strong>📍 Location:</strong> 76 Hereford Street, Christchurch</p>
                                    <p><strong>📄 Summary:</strong> Who will win the Building Institute Southern Region Quiz this year?! Pull together your team of six and join us for one of the standout social fixtures in Christchurch's construction sector calendar. The event features welcome drinks, platters, networking, Believe it or Not Quiz with bonus challenge rounds with Riggsy from Hirepool as your quiz master!</p>
                                    <a href="https://buildinginstitute.nz/events/southern-region-rockcote-quiz-night-2025/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="event-card fourweeks" data-date="2025-09-18">
                            <div class="event-content">
                                <h3>Site Visit: Fisher & Paykel</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 18, 2025</p>
                                    <p><strong>📍 Location:</strong> 129 Diana Drive, Auckland</p>
                                    <p><strong>📄 Summary:</strong> Take an exclusive look inside a landmark construction project. Step inside one of Auckland's most innovative construction projects with this exclusive site visit to Fisher & Paykel's purpose-built Global HQ and research and development facility.</p>
                                    <a href="https://buildinginstitute.nz/events/site-visit-fisher-and-paykel/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="event-card fourweeks" data-date="2025-09-24">
                            <div class="event-content">
                                <h3>Site Visit Makers Construction</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 24, 2025</p>
                                    <p><strong>📍 Location:</strong> 115 Gracefield Road, Lower Hutt</p>
                                    <p><strong>📄 Summary:</strong> Makers Fabrication connects architecture and construction through digital technology and offsite manufacturing, delivering tailored solutions across modular, hybrid, panelised, and custom joinery projects, including mahi toi/arts integration.</p>
                                    <a href="https://buildinginstitute.nz/events/site-visit-makers-construction/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="event-card fourweeks" data-date="2025-09-26">
                            <div class="event-content">
                                <h3>Site Visit: 211 High Street</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 26, 2025</p>
                                    <p><strong>📍 Location:</strong> 211 High Street, Christchurch</p>
                                    <p><strong>📄 Summary:</strong> Join a site tour of Christchurch's first commercial European mass timber project, showcasing sustainable construction with glulam beams and CLT panels.</p>
                                    <a href="https://buildinginstitute.nz/events/site-visit-211-high-street/" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TIC Events -->
                <div class="organization-container tic-events" id="ticContainer">
                    <div class="organization-header">
                        <h2>🏛️ TIC Auckland</h2>
                    </div>
                    <div class="org-events-grid">
                        <div class="event-card nextweek" data-date="2025-09-10">
                            <div class="event-content">
                                <h3>TIC Auckland Site Visit: The Karanga-a-Hape Station Precinct Integration Project</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 10, 2025</p>
                                    <p><strong>📍 Location:</strong> 53 Pitt Street, Auckland</p>
                                    <p><strong>📄 Summary:</strong> TIC Auckland, together with Auckland Transport and JFC, are pleased to invite a small group of members to visit Project K – The Karanga-a-Hape Station Precinct Integration Project.</p>
                                    <a href="https://portal.infrastructure.org.nz/all-events/events-details/?id=3e10cf3a-8fd8-44f1-b4db-92320ae2f0d7" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- University Events -->
                <div class="organization-container university-events" id="universityContainer">
                    <div class="organization-header">
                        <h2>🎓 University of Canterbury</h2>
                    </div>
                    <div class="org-events-grid">
                        <div class="event-card fourweeks" data-date="2025-09-16">
                            <div class="event-content">
                                <h3>Raising the Bar - Christchurch</h3>
                                <div class="event-details">
                                    <p><strong>📅 Date:</strong> September 16, 2025</p>
                                    <p><strong>📍 Location:</strong> 380 Colombo Street, Christchurch</p>
                                    <p><strong>📄 Summary:</strong> Ever wished your lecture came with a comfy booth and your favourite pint? Here's your chance. Raising the Bar is back on Tuesday 16 September! UC is taking 20 smart, funny and thought-provoking talks into 10 bars across Christchurch Central, Redcliffs and Lincoln.</p>
                                    <a href="https://www.rtbevent.com/rtbchch2025" class="event-link">View Event →</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="no-events hidden" id="noEventsMessage">
                <div class="no-events-icon">😔</div>
                <h3>No events found</h3>
                <p>Try adjusting your search terms</p>
            </div>
        </div>
    </div>

    <script>
        // Get all event cards and organization containers
        const eventCards = document.querySelectorAll('.event-card');
        const orgContainers = document.querySelectorAll('.organization-container');
        
        function countEventsByPeriod() {
            const counts = {
                thisweek: 0,
                nextweek: 0,
                fourweeks: 0,
                total: 0
            };
            
            eventCards.forEach(card => {
                const classes = card.className;
                if (classes.includes('thisweek')) counts.thisweek++;
                else if (classes.includes('nextweek')) counts.nextweek++;
                else if (classes.includes('fourweeks')) counts.fourweeks++;
                counts.total++;
            });
            
            return counts;
        }
        
        function updateStats() {
            const counts = countEventsByPeriod();
            
            document.getElementById('totalEvents').textContent = counts.total;
            document.getElementById('thisWeekCount').textContent = counts.thisweek;
            document.getElementById('nextWeekCount').textContent = counts.nextweek;
            document.getElementById('upcomingCount').textContent = counts.fourweeks;
        }
        
        function filterEvents(period) {
            const allContainer = document.getElementById('allEventsContainer');
            const noEventsMsg = document.getElementById('noEventsMessage');
            let hasVisibleEvents = false;
            
            // Show/hide organization containers based on whether they have matching events
            orgContainers.forEach(container => {
                const cards = container.querySelectorAll('.event-card');
                let containerHasVisibleEvents = false;
                
                cards.forEach(card => {
                    if (period === 'all' || card.classList.contains(period)) {
                        card.style.display = 'block';
                        containerHasVisibleEvents = true;
                        hasVisibleEvents = true;
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // Show/hide the entire organization container
                container.style.display = containerHasVisibleEvents ? 'block' : 'none';
            });
            
            if (!hasVisibleEvents) {
                allContainer.style.display = 'none';
                noEventsMsg.classList.remove('hidden');
            } else {
                allContainer.style.display = 'block';
                noEventsMsg.classList.add('hidden');
            }
        }
        
        function searchEvents(searchTerm) {
            const allContainer = document.getElementById('allEventsContainer');
            const noEventsMsg = document.getElementById('noEventsMessage');
            let hasVisibleEvents = false;
            
            if (!searchTerm.trim()) {
                // Show all events and containers if no search term
                eventCards.forEach(card => card.style.display = 'block');
                orgContainers.forEach(container => container.style.display = 'block');
                allContainer.style.display = 'block';
                noEventsMsg.classList.add('hidden');
                return;
            }
            
            const searchLower = searchTerm.toLowerCase();
            
            orgContainers.forEach(container => {
                const cards = container.querySelectorAll('.event-card');
                let containerHasVisibleEvents = false;
                
                cards.forEach(card => {
                    const content = card.textContent.toLowerCase();
                    if (content.includes(searchLower)) {
                        card.style.display = 'block';
                        containerHasVisibleEvents = true;
                        hasVisibleEvents = true;
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // Show/hide the entire organization container
                container.style.display = containerHasVisibleEvents ? 'block' : 'none';
            });
            
            if (!hasVisibleEvents) {
                allContainer.style.display = 'none';
                noEventsMsg.classList.remove('hidden');
            } else {
                allContainer.style.display = 'block';
                noEventsMsg.classList.add('hidden');
            }
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            
            // Filter button listeners
            document.querySelectorAll('.filter-btn:not(.clear-filters)').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn:not(.clear-filters)').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const period = this.dataset.period;
                    filterEvents(period);
                    
                    // Clear search when using period filters
                    document.getElementById('searchBox').value = '';
                });
            });
            
            // Clear filters button
            document.querySelector('.clear-filters').addEventListener('click', function() {
                document.getElementById('searchBox').value = '';
                document.querySelectorAll('.filter-btn:not(.clear-filters)').forEach(b => b.classList.remove('active'));
                document.querySelector('.filter-btn[data-period="all"]').classList.add('active');
                filterEvents('all');
            });
            
            // Search functionality
            document.getElementById('searchBox').addEventListener('input', function() {
                const searchTerm = this.value;
                searchEvents(searchTerm);
                
                // Update filter buttons when searching
                if (searchTerm.trim()) {
                    document.querySelectorAll('.filter-btn:not(.clear-filters)').forEach(b => b.classList.remove('active'));
                }
            });
        });
    </script>